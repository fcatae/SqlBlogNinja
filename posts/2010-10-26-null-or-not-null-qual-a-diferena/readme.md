<a link='https://blogs.msdn.microsoft.com/fcatae/2010/10/26/null-or-not-null-qual-a-diferena/'>NULL or NOT NULL: Qual a diferença?</a>
<p>A idéia começou a partir de um comentário gerado no post <a href="http://blogs.msdn.com/b/fcatae/archive/2010/08/09/data-buffer.aspx" target="_blank">Data Buffer</a>, quando o <strong>DBA SQL </strong>sugeriu a utilização do DBCC PAGE para visualizar os registros dentro de um buffer – enfim, ele queria ver os bits &amp; bytes do SQL Server. Isso me lembrou uma pergunta bastante interessante sobre o comportamento do banco de dados:</p>  <blockquote>   <p><em>Qual a diferença em termos de espaço em disco de usar NULL ou NOT NULL? É possível economizar espaço?</em></p> </blockquote>  <p><em></em></p>  <h2>Vamos ao experimento!</h2>  <p>Criamos duas tabelas A e B, cuja única diferença é o campo <strong>coluna </strong>ser NULL ou NOT NULL. Segue a definição:</p> <font color="#0000ff" size="2" face="Courier New">   <blockquote>     <p align="left">CREATE <font color="#0000ff" size="2" face="Courier New">TABLE</font><font color="#000000" size="2" face="Courier New"> A</font><font color="#808080" size="2" face="Courier New">(</font><font color="#000000" size="2" face="Courier New"> coluna </font><font color="#0000ff" size="2" face="Courier New">CHAR</font><font color="#808080" size="2" face="Courier New">(</font><font color="#000000" size="2" face="Courier New">100</font><font color="#808080" size="2" face="Courier New">)</font><font color="#000000" size="2" face="Courier New"> </font><font color="#808080" size="2" face="Courier New">NULL</font><font color="#000000" size="2" face="Courier New"> </font><font color="#808080" size="2" face="Courier New">)</font><font color="#000000" size="2" face="Courier New"> </font></p>      <p align="left"></p>      <p align="left"></p>     <font color="#0000ff" size="2" face="Courier New">CREATE</font><font color="#000000" size="2" face="Courier New"> </font><font color="#0000ff" size="2" face="Courier New">TABLE</font><font color="#000000" size="2" face="Courier New"> A</font><font color="#808080" size="2" face="Courier New">(</font><font color="#000000" size="2" face="Courier New"> coluna </font><font color="#0000ff" size="2" face="Courier New">CHAR</font><font color="#808080" size="2" face="Courier New">(</font><font color="#000000" size="2" face="Courier New">100</font><font color="#808080" size="2" face="Courier New">)</font><font color="#000000" size="2" face="Courier New"> </font><font color="#808080" size="2" face="Courier New">NOT</font><font color="#000000" size="2" face="Courier New"> </font><font color="#808080" size="2" face="Courier New">NULL</font><font color="#000000" size="2" face="Courier New"> </font><font color="#808080" size="2" face="Courier New">)</font></blockquote> </font>  <p>Em seguida, populamos a tabela com uma série de registros.</p> <font color="#0000ff" size="2" face="Courier New">   <blockquote>     <p align="left">INSERT <font color="#000000" size="2" face="Courier New">A </font><font color="#0000ff" size="2" face="Courier New">VALUES </font><font color="#808080" size="2" face="Courier New">(NULL)</font><font color="#000000" size="2" face="Courier New"> </font></p>   </blockquote>    <p align="left"></p>    <blockquote>     <p align="left"></p>     <font color="#0000ff" size="2" face="Courier New">GO</font><font color="#000000" size="2" face="Courier New"> 1000 </font></blockquote>    <p align="left"></p>    <blockquote>     <p align="left"></p>     <font color="#0000ff" size="2" face="Courier New">INSERT</font><font color="#000000" size="2" face="Courier New"> B </font><font color="#0000ff" size="2" face="Courier New">VALUES </font><font color="#808080" size="2" face="Courier New">(</font><font color="#ff0000" size="2" face="Courier New">'ABCDEF<font color="#ff0000" size="2" face="Courier New">'</font></font><font color="#808080" size="2" face="Courier New">)</font><font color="#000000" size="2" face="Courier New"> </font></blockquote>    <p align="left"></p>    <blockquote>     <p align="left"></p>     <font color="#0000ff" size="2" face="Courier New">GO</font><font color="#000000" size="2" face="Courier New"> 1000</font></blockquote>    <p align="left"></p> </font>  <p>Ambas as tabelas utilizam campos CHAR(100), mas populamos a tabela A com 1000 registros nulos, enquanto que a tabela B possui 1000 registros ‘ABCDEF’. </p>  <p>&#160;</p>  <p>&#160;</p>  <h2>Qual ocupa mais espaço em disco?</h2>  <p>Medimos o espaço utilizado em disco através da stored procedure <strong>sp_spaceused</strong>.</p> <font color="#0000ff" size="2" face="Courier New">   <blockquote>     <p align="left">EXEC <font color="#800000" size="2" face="Courier New">sp_spaceused</font><font color="#ff0000" size="2" face="Courier New">'</font><font color="#ff0000" size="2" face="Courier New">A<font color="#ff0000" size="2" face="Courier New">'</font></font><font color="#000000" size="2" face="Courier New"> </font></p>   </blockquote>    <p align="left"></p>    <blockquote>     <p align="left"></p>     <font color="#0000ff" size="2" face="Courier New">EXEC</font><font color="#000000" size="2" face="Courier New"> </font><font color="#800000" size="2" face="Courier New">sp_spaceused</font><font color="#0000ff" size="2" face="Courier New"> </font><font color="#ff0000" size="2" face="Courier New"><font color="#ff0000" size="2" face="Courier New">'</font>B<font color="#ff0000" size="2" face="Courier New">'</font></font></blockquote> </font>  <p><span style="font-family: courier new;color: #0000ff;font-size: x-small"></span></p>  <blockquote>   <p align="left"><a href="images\3225.image_4698C522.png"><img style="border-right-width: 0px;padding-left: 0px;padding-right: 0px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px;padding-top: 0px" title="image" border="0" alt="sp_spaceused" src="images\4477.image_thumb_3DC8BCD6.png" width="334" height="99" /></a></p> </blockquote>  <p>Uau! As tabelas apresentam o mesmo espaço em disco! Seria isso uma surpresa? </p>  <p>&#160;</p>  <h2>Moral da história</h2>  <p>A diferença de NULL e NOT NULL não faz diferença em economia de espaço para <strong><span style="text-decoration: underline">tipos de dados de tamanho fixo</span></strong>. Isso inclui CHAR, INTEGER, DATETIME, FLOAT, entre outros.</p>  <p>&#160;</p>  <p>Existe duas formas de economizar espaço:</p>  <ol>   <li>Armazenar os dados usando tipos de dado com tamanho variável (Ex: VARCHAR) </li>    <li>Habilitar o ROW/PAGE COMPRESSION na tabela </li> </ol>
