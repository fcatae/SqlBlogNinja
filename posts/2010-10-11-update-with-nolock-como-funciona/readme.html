<a link='https://blogs.msdn.microsoft.com/fcatae/2010/10/11/update-with-nolock-como-funciona/'>UPDATE WITH (NOLOCK): Como funciona?</a>
<blockquote>   <p><strong>Links relacionados</strong></p>    <ul>     <li><a href="http://blogs.msdn.com/b/fcatae/archive/2010/10/05/como-usar-select-with-nolock-para-melhorar-a-performance.aspx">Como usar SELECT WITH NOLOCK para melhorar a Performance?</a> </li>      <li><a href="http://blogs.msdn.com/b/fcatae/archive/2010/10/06/nolock-ou-with-nolock-qual-a-sintaxe-correta.aspx">Qual a sintaxe correta: NOLOCK ou WITH (NOLOCK)?</a> </li>      <li><a href="http://blogs.msdn.com/b/fcatae/archive/2010/10/11/update-with-nolock-como-funciona.aspx">NOLOCK e INSERT/UPDATE/DELETE</a> </li>      <li><a href="http://blogs.msdn.com/b/fcatae/archive/2010/10/13/problemas-com-nolock-sql-server.aspx">Problemas com NOLOCK</a> </li>      <li><a href="http://blogs.msdn.com/b/fcatae/archive/2010/04/28/efeitos-colaterais-do-with-nolock-parte-i.aspx">Efeitos colaterais do NOLOCK – Parte 1</a> </li>      <li><a href="http://blogs.msdn.com/b/fcatae/archive/2010/06/02/efeitos-colaterais-do-with-nolock-parte-ii.aspx">Efeitos colaterais do NOLOCK – Parte 2</a></li>   </ul> </blockquote>  <p>O comando NOLOCK avisa o processador do SQL Server para evitar a utilização de bloqueios (LOCK) durante a <strong><u>leitura de dados</u></strong>. Porém, o SQL Server continua utilizando os bloqueios durante operações de modificação de dados e não há como mudar esse comportamento. A utilização do NOLOCK é, portanto, inválida para as tabelas que terão registros afetados por INSERT, DELETE e UPDATE.</p> <font color="#0000ff" size="2" face="Courier New">   <blockquote>     <p align="left">INSERT <font color="#000000" size="2" face="Courier New">tbUsuarios </font><font style="background-color: #ffff00"><font color="#0000ff" size="2" face="Courier New">WITH </font><font color="#808080" size="2" face="Courier New">(</font><font color="#0000ff" size="2" face="Courier New">NOLOCK</font><font color="#808080" size="2" face="Courier New">)</font></font><font color="#0000ff" size="2" face="Courier New"> </font><font color="#808080" size="2" face="Courier New">(</font><font color="#000000" size="2" face="Courier New">nome</font><font color="#808080" size="2" face="Courier New">)</font><font color="#000000" size="2" face="Courier New"> </font><font color="#0000ff" size="2" face="Courier New">VALUES </font><font color="#808080" size="2" face="Courier New">(</font><font color="#ff0000" size="2" face="Courier New">'A'</font><font color="#808080" size="2" face="Courier New">)</font></p>   </blockquote>    <blockquote>     <p align="left"></p>     <font color="#0000ff" size="2" face="Courier New">DELETE</font><font color="#000000" size="2" face="Courier New"> tbUsuarios </font><font style="background-color: #ffff00"><font color="#0000ff" size="2" face="Courier New">WITH </font><font color="#808080" size="2" face="Courier New">(</font><font color="#0000ff" size="2" face="Courier New">NOLOCK</font><font color="#808080" size="2" face="Courier New">)</font></font><font color="#000000" size="2" face="Courier New"> </font><font color="#0000ff" size="2" face="Courier New">WHERE</font><font color="#000000" size="2" face="Courier New"> id </font><font color="#808080" size="2" face="Courier New">=</font><font color="#000000" size="2" face="Courier New"> 1</font></blockquote> </font><font color="#0000ff" size="2" face="Courier New">   <blockquote>     <p align="left">UPDATE <font color="#000000" size="2" face="Courier New">tbUsuarios </font><font style="background-color: #ffff00"><font color="#0000ff" size="2" face="Courier New">WITH </font><font color="#808080" size="2" face="Courier New">(</font><font color="#0000ff" size="2" face="Courier New">NOLOCK</font><font color="#808080" size="2" face="Courier New">)</font></font><font color="#000000" size="2" face="Courier New"> </font><font color="#0000ff" size="2" face="Courier New">SET</font><font color="#000000" size="2" face="Courier New"> nome </font><font color="#808080" size="2" face="Courier New">=</font><font color="#000000" size="2" face="Courier New"> </font><font color="#ff0000" size="2" face="Courier New">'B'</font><font color="#000000" size="2" face="Courier New"> </font><font color="#0000ff" size="2" face="Courier New">WHERE</font><font color="#000000" size="2" face="Courier New"> id </font><font color="#808080" size="2" face="Courier New">=</font><font color="#000000" size="2" face="Courier New"> 1</font></p>   </blockquote> </font>  <p>Esses comandos resultam no erro:</p> <font color="#000000" size="1" face="Courier New">   <blockquote>     <p align="left"><font color="#ff0000" size="2">Msg 1065, Level 15, State 1, Line 15</font></p>      <p align="left"><font color="#ff0000" size="2">The NOLOCK and READUNCOMMITTED lock hints are not allowed for target tables of INSERT, UPDATE, DELETE or MERGE statements.</font></p>   </blockquote> </font>  <p>&#160;</p>  <h2>INSERT WITH (NOLOCK) </h2>  <p>A restrição do NOLOCK se aplica somente à tabela que receberá os novos registros, sendo ainda possível utilizar NOLOCK para as tabelas que fornecem os registros. Exemplo:</p>  <div><font color="#0000ff" size="2" face="Courier New">     <blockquote>       <p align="left">INSERT <font color="#000000" size="2" face="Courier New">tbHistorico</font><font color="#0000ff" size="2" face="Courier New"> </font><font color="#808080" size="2" face="Courier New">(</font><font color="#000000" size="2" face="Courier New">Nome</font><font color="#808080" size="2" face="Courier New">)            <br /></font><font color="#0000ff" size="2" face="Courier New">SELECT</font><font color="#000000" size="2" face="Courier New"> Nome </font><font color="#0000ff" size="2" face="Courier New">FROM</font><font color="#000000" size="2" face="Courier New"> <font style="background-color: #ffff00">tbUsuarios </font></font><font style="background-color: #ffff00"><font color="#0000ff" size="2" face="Courier New">WITH </font><font color="#808080" size="2" face="Courier New">(</font><font color="#0000ff" size="2" face="Courier New">NOLOCK</font><font color="#808080" size="2" face="Courier New">)</font></font></p>     </blockquote>   </font>Nesse caso, os dados serão lidos a partir da tabela <strong>tbUsuarios</strong> e gravadas na tabela <strong>tbHistorico</strong>. A restrição do NOLOCK existe para a tabela <strong>tbHistorico</strong>, mas não impede seu uso na tabela <strong>tbUsuarios</strong>. </div>  <p>&#160;</p>  <h2>DELETE WITH (NOLOCK)</h2>  <p>A sintaxe do comando DELETE permite utilizar o NOLOCK para as tabelas que não terão registros apagados. Por exemplo, em uma operação de JOIN entre tabelas, aquelas usadas para leitura aceitam o NOLOCK.</p> <font color="#008000" size="2" face="Courier New">   <blockquote>     <p align="left">-- FUNCIONA        <br /></p>     <font color="#0000ff" size="2" face="Courier New">DELETE</font><font color="#000000" size="2" face="Courier New"> tbHistorico        <br /></font><font color="#0000ff" size="2" face="Courier New">FROM</font><font color="#000000" size="2" face="Courier New"> </font><font color="#000000" size="2" face="Courier New"><font style="background-color: #ffff00">tbUsuarios u </font></font><font style="background-color: #ffff00"><font color="#0000ff" size="2" face="Courier New">WITH </font><font color="#808080" size="2" face="Courier New">(</font><font color="#0000ff" size="2" face="Courier New">NOLOCK</font><font color="#808080" size="2" face="Courier New">)</font></font><font color="#0000ff" size="2" face="Courier New"> WHERE</font><font color="#000000" size="2" face="Courier New"> tbHistorico</font><font color="#808080" size="2" face="Courier New">.</font><font color="#000000" size="2" face="Courier New">id</font><font color="#808080" size="2" face="Courier New">=</font><font color="#000000" size="2" face="Courier New">u</font><font color="#808080" size="2" face="Courier New">.</font><font color="#000000" size="2" face="Courier New">id</font></blockquote> </font>  <p>Nesse caso, a restrição se aplica somente a <strong>tbHistorico</strong>. A tabela <strong>tbUsuarios</strong> é utilizada somente para leitura e permite a utilização de NOLOCK. </p>  <p>&#160;</p>  <h2>UPDATE WITH (NOLOCK)</h2>  <p>A mesma regra se aplica ao UPDATE. Em uma operação de JOIN, as tabelas usadas para leitura aceitam o NOLOCK ea&#160; restrição se aplica somente a tabela que será modificada. </p> <font color="#008000" size="2" face="Courier New">   <blockquote>     <p align="left">-- FUNCIONA        <br /><font color="#0000ff" size="2" face="Courier New">UPDATE</font><font color="#000000" size="2" face="Courier New"> tbHistorico </font><font color="#0000ff" size="2" face="Courier New">SET</font><font color="#000000" size="2" face="Courier New"> Nome </font><font color="#808080" size="2" face="Courier New">=</font><font color="#000000" size="2" face="Courier New"> u</font><font color="#808080" size="2" face="Courier New">.</font><font color="#000000" size="2" face="Courier New">Nome          <br /></font><font color="#0000ff" size="2" face="Courier New">FROM</font><font color="#000000" size="2" face="Courier New"> </font><font color="#000000" size="2" face="Courier New"><font style="background-color: #ffff00">tbUsuarios u </font></font><font style="background-color: #ffff00"><font color="#0000ff" size="2" face="Courier New">WITH </font><font color="#808080" size="2" face="Courier New">(</font><font color="#0000ff" size="2" face="Courier New">NOLOCK</font><font color="#808080" size="2" face="Courier New">)</font></font><font color="#000000" size="2" face="Courier New"> </font><font color="#0000ff" size="2" face="Courier New">WHERE</font><font color="#000000" size="2" face="Courier New"> tbHistorico</font><font color="#808080" size="2" face="Courier New">.</font><font color="#000000" size="2" face="Courier New">id</font><font color="#808080" size="2" face="Courier New">=</font><font color="#000000" size="2" face="Courier New">u</font><font color="#808080" size="2" face="Courier New">.</font><font color="#000000" size="2" face="Courier New">id</font></p>   </blockquote> </font>
