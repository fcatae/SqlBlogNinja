<a link='https://blogs.msdn.microsoft.com/fcatae/2014/01/06/desafio-comando-kill-demorado-infinito/'>Desafio: Comando KILL demorado (infinito)</a>
<blockquote>   <p><em>A ideia desse post surgiu há 3 semanas durante um treinamento interno com a equipe de suporte. Desde então tivemos comemorações de Natal e Ano Novo. Espero que todos tenham aproveitado essa época. Aproveito para desejar a todos um ótimo ano de 2014!!!</em></p> </blockquote>  <p>O tópico de hoje é entender um conceito relacionado a threads e tarefas do SQL Server. Estava fazendo diagnósticos em um servidor e decidi usar o comando <strong>xp_cmdshell</strong> para procurar arquivos no sistema. Comecei assim:</p>  <blockquote>   <p><a href="images\8004.image_55B871F6.png"><img title="image" border="0" alt="image" src="images\3678.image_thumb_607859FC.png" width="462" height="225" /></a></p> </blockquote>  <p>Ótimo! Consegui o resultado esperado. O segundo passo foi executar um comando para procurar uma DLL específica, mas sem querer (por costume?) escrevi “notepad” na linha de comando. Eis que a query ficou executando e aquele círculo verde, rodando.</p>  <blockquote>   <p><a href="images\8080.image_6B384202.png"><img title="image" border="0" alt="image" src="images\4544.image_thumb_0604680F.png" width="345" height="201" /></a></p> </blockquote>  <p>Minha reação foi executar o comando de KILL. Infelizmente nem isso foi capaz de cancelar a bobagem anterior. O comando <strong>xp_cmdshell</strong> ficou rodando e o comando KILL apresentou a mensagem de que estava tudo ok e logo seria completado (“<em>… in progress. Estimated rollback completion: 0%. Estimated time ramaining 0 seconds</em>”). </p>  <blockquote>   <p><a href="images\0777.image_136D0BC6.png"><img title="image" border="0" alt="image" src="images\6835.image_thumb_22A37493.png" width="382" height="158" /></a></p> </blockquote>  <p>Esse é o desafio: seria possível executar comandos que rodam infinitamente no servidor e não podem ser cancelados pelo DBA?</p>  <p>O que fazer nesse caso? </p>  <p>Alguma explicação? </p>    <p>- Fabricio Catae</p>
