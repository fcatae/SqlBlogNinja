<a link='https://blogs.msdn.microsoft.com/fcatae/2016/02/16/desafio-analisando-servidor-com-perfmon/'>Desafio: Analisando Servidor com Perfmon</a>
<p>Hoje é dia de desafio! Estou colocando os contadores (na forma gráfica) para que você possa analisar e tirar suas conclusões.</p>  <blockquote>   <p><strong>Artigo: </strong><a title="Perfmon- Falso Sentido de Monitoração" href="http://blogs.msdn.com/b/fcatae/archive/2016/01/12/perfmon-falso-sentido-de-monitoracao.aspx"><strong>Perfmon- Falso Sentido de Monitoração</strong></a></p>    <p><strong>Artigo: Os 7 Grandes Mitos do Perfmon:</strong></p>    <ul>     <li><a href="http://blogs.msdn.com/b/fcatae/archive/2016/01/19/os-7-grandes-mitos-do-perfmon-parte-1.aspx">Parte 1: Buffer Cache Hit Ratio, Average Disk Queue Length e %Disk Busy</a></li>      <li><a href="http://blogs.msdn.com/b/fcatae/archive/2016/01/26/os-7-grandes-mitos-do-perfmon-parte-2.aspx">Parte 2: Paging File:%Usage, Memory: Page Faults/sec e Memory: Pages/sec</a></li>      <li><a href="http://blogs.msdn.com/b/fcatae/archive/2016/02/02/os-7-grandes-mitos-do-perfmon-parte-3.aspx">Parte 3: SQL Access Methods: Page Splits/sec, SQL Locks: Lock Waits/sec e SQL General Statistics: User Connections</a></li>   </ul> </blockquote>  <blockquote>   <p><strong>Artigo: </strong><a href="http://blogs.msdn.com/b/fcatae/archive/2016/02/09/contadores-do-perfmon.aspx"><strong>Contadores do Perfmon</strong></a></p>    <p>&#160;</p> </blockquote>  <h1>Contadores coletados</h1>  <p>Fig.1: Consumo de CPU: %Processor Time e %Privileged Time (Kernel Time)</p>  <p><a href="images\0167.image_7E43D269.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\3201.image_thumb_1FC301F9.png" width="644" height="165" /></a></p>  <p>Fig.2: Fila de CPU: Processor Queue Length</p>  <p><a href="images\1106.image_65D64FBD.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\3021.image_thumb_0E774C76.png" width="644" height="165" /></a></p>  <p>Fig.3: System: Context Switches</p>  <p><a href="images\5008.image_501188C2.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\0652.image_thumb_51E1DE89.png" width="644" height="165" /></a></p>  <p>Fig.4: Memória: %Committed Bytes</p>  <p><a href="images\7215.image_4888AA06.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\1754.image_thumb_51783C45.png" width="644" height="152" /></a></p>  <p>Fig.5: Memória: Available MB (memória livre no sistema)</p>  <p><a href="images\6404.image_1A31B50A.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\5367.image_thumb_17F7BCFF.png" width="644" height="165" /></a></p>  <p>Fig.6: Logical Disk: Reads/sec e Writes/sec (IOPS)</p>  <p><a href="images\2335.image_19C812C6.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\2260.image_thumb_54AF458F.png" width="644" height="164" /></a></p>  <p>Fig. 7: Logical Disk: Disk Read Bytes/sec e Disk Write Bytes/sec (taxa de transferência – MB/s)</p>  <p><a href="images\3276.image_325A40C7.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\7343.image_thumb_063D43D6.png" width="644" height="164" /></a></p>  <p>Fig. 8: Logical Disk: Avg Disk Sec/Transfer (latência do disco)</p>  <p><a href="images\0336.image_15DFDF98.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\6663.image_thumb_731EA7DA.png" width="644" height="165" /></a></p>  <p>Fig. 9: Logical Disk: Writes/sec e Disk Write Bytes/sec (IOPS e taxa de escrita no disco de LOG)</p>  <p><a href="images\5556.image_34BB74D8.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\2766.image_thumb_7655B124.png" width="644" height="164" /></a></p>  <p>Fig. 10: Logical Disk: Avg Disk Sec/Write (latência no disco de LOG) – escala de 0 a 20ms</p>  <p><a href="images\2870.image_01EDFF15.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\8015.image_thumb_236D2EA4.png" width="644" height="164" /></a></p>  <p>Fig. 11: Network Interfaces: Data Sent/sec e Data Received/sec (taxa de transferência de rede)</p>  <p><a href="images\0435.image_2E99499F.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\4276.image_thumb_30699F66.png" width="644" height="165" /></a></p>  <p>Fig. 12: Buffer Manager: Free Pages, Stolen Pages, Database Pages, Total Pages, Target Pages (Buffer Distribution)</p>  <p><a href="images\8816.image_5FBB14F0.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\0250.image_thumb_246A3FE3.png" width="644" height="165" /></a></p>  <p>Fig. 13: Buffer Manager: Page Life Expectancy e Lazy Writes/sec</p>  <p><a href="images\2018.image_6D23B8A7.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\8228.image_thumb_4106BBB6.png" width="644" height="165" /></a></p>  <p>Fig. 14: Buffer Manager: Free List Stalls/sec</p>  <p><a href="images\0827.image_1E4583F9.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\5543.image_thumb_3C2698AB.png" width="644" height="165" /></a></p>  <p>Fig. 15: Buffer Manager: Page Reads/sec e Readahead pages/sec</p>  <p><a href="images\1050.image_66955A79.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\0842.image_thumb_33C7E4B6.png" width="644" height="165" /></a></p>  <p>Fig. 16: General Statistics: User Connections</p>  <p><a href="images\3386.image_780ADCB3.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\5265.image_thumb_19F63F38.png" width="644" height="165" /></a></p>  <p>Fig. 17: General Statistics: Logins/sec, Resets/sec e SQL Statistics: Batches/sec</p>  <p><a href="images\2475.image_54DD7201.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\5633.image_thumb_1D96EAC6.png" width="644" height="165" /></a></p>  <p>Fig. 18: SQL Statistics: Batches/sec, SQL Compilations/sec, SQL Re-Compilations/sec</p>  <p><a href="images\2438.image_5B26D940.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\2772.image_thumb_0AE481C0.png" width="644" height="165" /></a></p>  <p>Fig. 19: SQL Statistics: SQL Compilations/sec, SQL Re-Compilations/sec, Safe Auto-Params/sec, Forced Parametrizations/sec</p>  <p><a href="images\5554.image_6C99CAC9.png"><img title="image" style="border-top: 0px;border-right: 0px;border-bottom: 0px;padding-top: 0px;padding-left: 0px;border-left: 0px;padding-right: 0px" border="0" alt="image" src="images\7115.image_thumb_7C3C668B.png" width="644" height="165" /></a></p>  <p>&#160;</p>  <h1>Qual a sua recomendação sobre o servidor?</h1>  <p>Olhando os gráficos, enxergo pelo menos uma recomendação sobre o servidor. E você, qual a sua opinião?</p>  <ul>   <li>Falta CPU na máquina?</li>    <li>Falta memória RAM?</li>    <li>Qual o ganho em usar discos SSD?</li>    <li>Podemos habilitar o Buffer Pool Extension?</li>    <li>As stored procedures podem ser otimizadas?</li>    <li>Valeria a pena usar o Hekaton?</li>    <li>Que tal arriscar o ColumnStore?</li> </ul>  <p>&#160;</p>  <p>No próximo post vou revelar um pouco mais sobre como analisar esses contadores. Vamos falar sobre a distribuição de memória do SQL.</p>
