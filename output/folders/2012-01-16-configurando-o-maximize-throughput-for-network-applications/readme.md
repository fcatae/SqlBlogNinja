<a link='https://blogs.msdn.microsoft.com/fcatae/2012/01/16/configurando-o-maximize-throughput-for-network-applications/'>Configurando o Maximize Throughput for Network Applications</a>
<p>Comecei a reler os artigos que escrevi no passado e encontrei um falando sobre <a href="http://blogs.msdn.com/b/fcatae/archive/2010/03/31/memory-working-set.aspx">Working Set</a>. Quando escrevi o post, pensava no mistério do porque o Task Manager reporta a quantidade incorreta de memória usada pelo SQL Server. A explicação está em um documento do MSDN que comenta sobre a composição do Working Set. Toda a memória AWE e Locked Pages <strong><u>não</u></strong> fazem parte do Working Set e, portanto, não são reportados corretamente pelo Task Manager.</p> <blockquote><em>MSDN Working Set<br></em><a title="http://msdn.microsoft.com/en-us/library/cc441804(VS.85).aspx" href="http://msdn.microsoft.com/en-us/library/cc441804(VS.85).aspx">http://msdn.microsoft.com/en-us/library/cc441804(VS.85).aspx</a></blockquote> <p>Hoje estive repensando sobre o assunto e lembrei de uma configuração importante e que não deve ser deixada de fora do seu checklist.</p> <p>Nos tempos antigos do Windows NT/2000, quando a memória era um recurso escasso, o Sistema Operacional procurava usar toda a memória disponível da máquina. Se a máquina tivesse 1GB, 2GB, 3GB, não importava… ele procurava manter somente 4MB de memória livre. Mais do que isso era um desperdício de memória livre!</p> <blockquote> <p><em>Working Set Size, Nonpaged Pool, and VirtualLock()<br></em><a title="http://support.microsoft.com/kb/108449" href="http://support.microsoft.com/kb/108449">http://support.microsoft.com/kb/108449</a></p></blockquote> <p>O sistema operacional gerenciava quanto cada aplicação poderia usar de memória física. Quando a máquina se encontrava com pouca quantidade de memória (os tais 4MB), o Windows iniciava a paginação de memória virtual para o Page File. Entrava então, a decisão sobre qual o processo que deveria ser paginado e isso levaria em conta o Working Set de cada processo e do cache do File System.</p> <blockquote> <p>Working Set = Quantidade de memória RAM utilizada por um determinado processo</p></blockquote> <p>É durante essa decisão que entra o parâmetro de configuração “Maximize Throughput for Network Applications”, pois o Sistema Operacional procura diminuir o Working Set do File System antes de começar a diminuir a memória dos processos (incluindo o SQL Server). Portanto, o procedimento é habilitar a configuração seguindo os passos descritos no Books Online: </p> <blockquote> <p><em>Maximizing Data Throughput<br></em><a title="http://msdn.microsoft.com/en-us/library/ms191471.aspx" href="http://msdn.microsoft.com/en-us/library/ms191471.aspx">http://msdn.microsoft.com/en-us/library/ms191471.aspx</a></p></blockquote> <blockquote></blockquote> <p>Em um próximo post, gostaria de explicar melhor os efeitos da paginação quando ocorrem sobre o SQL Server. </p>
